(function(api){var About=api.About=api.extendReactClass('MixinBase',{propTypes:{logo:React.PropTypes.string,author:React.PropTypes.string,copyright:React.PropTypes.string,version:React.PropTypes.string,extension:React.PropTypes.string,hasUpdate:React.PropTypes.boolean,textMapping:React.PropTypes.object},getDefaultProps:function(){return{logo:'',author:'JoomlaShine.com',copyright:'(c)'+' '+'2013'+' '+'-'+' '+'JoomlaShine.com',version:'',extension:'',hasUpdate:false,textMapping:null};},render:function(){if(!api.Edition||!api.Edition.data){this.refreshLicense();return null;}var license=api.Edition.parseLicense();return React.createElement('div',{className:'jsn-pages jsn-page-about'},React.createElement('div',{className:'jsn-logo'},React.createElement('img',{src:this.props.logo}),license&&license.edition?React.createElement('span',{className:'jsn-edition'},license.edition):null),React.createElement('h3',null,api.Text.parse(api.Edition.params.extension.substr(4).toUpperCase())),React.createElement('p',null,api.Text.parse('JSN_EXTFW_AUTHOR'),':',' ',this.props.author),React.createElement('p',null,api.Text.parse('JSN_EXTFW_COPYRIGHT'),':',' ',this.props.copyright),React.createElement('p',null,api.Text.parse('JSN_EXTFW_VERSION'),':',' ',this.props.version,this.props.hasUpdate?[' '+'-'+' ',api.Text.parse('JSN_EXTFW_UPDATE_AVAILABLE'),'.'+' ',React.createElement('a',{href:'javascript:void(0)',className:'update-jsn-product'},api.Text.parse('JSN_EXTFW_UPDATE_NOW'))]:null),license&&license.edition.toLowerCase()=='free'?React.createElement('button',{type:'button',className:'btn btn-success',onClick:this.tryPro},api.Text.parse('JSN_EXTFW_PRO_UPGRADE')):null);},refresh:function(){setTimeout(this.forceUpdate.bind(this),500);},refreshLicense:function(){api.Edition.init({callback:this.refresh});},tryPro:function(){api.Edition.introducePro();}});var Account=api.Account=api.extendReactClass('MixinBase',{propTypes:{textMapping:React.PropTypes.object},getDefaultProps:function(){return{textMapping:null};},render:function(){if((!api.Edition||!api.Edition.data)&&!this.refreshed){this.refreshLicense();this.refreshed=true;return null;}var license=api.Edition.parseLicense();return license?React.createElement('div',{ref:'mountedDOMNode'},React.createElement('fieldset',null,React.createElement('legend',null,api.Text.parse('JSN_EXTFW_USER_ACCOUNT_USER_DETAILS')),React.createElement('span',null,api.Text.parse('JSN_EXTFW_USER_ACCOUNT_YOU_ARE_REGISTERED_WITH_THE_FOLLOWING_ACCOUNT')),React.createElement('ul',{style:{'list-style-type':'disc','padding-left':'16px'}},React.createElement('li',null,api.Text.parse('JSN_EXTFW_USERNAME'),':',' ',React.createElement('b',null,api.Edition.data.username)),React.createElement('li',null,api.Text.parse('JSN_EXTFW_USER_ACCOUNT_TOKEN_KEY'),':',' ',React.createElement('b',null,api.Edition.data.token)))),React.createElement('fieldset',null,React.createElement('legend',null,api.Text.parse('JSN_EXTFW_USER_ACCOUNT_PRODUCT_LICENSE')),React.createElement('span',null,api.Text.parse('JSN_EXTFW_USER_ACCOUNT_DOMAIN_IS_REGISTERED_AT_THE_FOLLOWING_LICENSE')),React.createElement('ul',{style:{'list-style-type':'disc','padding-left':'16px'}},React.createElement('li',null,api.Text.parse('JSN_EXTFW_USER_ACCOUNT_EDITION'),':',' ',React.createElement('b',null,api.Text.parse(api.Edition.params.extension.substr(4).toUpperCase()),' ',license.edition,license.edition.toLowerCase()=='free'?[' '+'(',React.createElement('a',{href:'javascript:void(0)',onClick:this.tryPro},api.Text.parse('JSN_EXTFW_TRY_PRO')),')']:null),license.related_product_name!=''?[' '+'(',api.Text.parse(api.Text.parse('JSN_EXTFW_RELATED_TO',true).replace('%s',license.related_product_name)),')']:null),React.createElement('li',null,api.Text.parse('JSN_EXTFW_USER_ACCOUNT_EXPIRATION_DATE'),':',' ',React.createElement('b',null,api.Text.toReadableDate(license.expiration_date))))),React.createElement('div',{className:'text-center'},React.createElement('button',{ref:'refresh',className:'btn btn-default',type:'button',onClick:this.refreshLicense},api.Text.parse('JSN_EXTFW_USER_ACCOUNT_REFRESH_LICENSE')),React.createElement('button',{ref:'unlink',className:'btn btn-danger',type:'button',onClick:this.unlinkAccount},api.Text.parse('JSN_EXTFW_USER_ACCOUNT_UNLINK_ACCOUNT')))):React.createElement('div',{ref:'mountedDOMNode',className:'row'},React.createElement('div',{className:'col-6 mx-auto'},React.createElement('div',{className:'card'},React.createElement('div',{className:'card-header'},api.Text.parse('JSN_EXTFW_USER_VERIFICATION_TITLE')),React.createElement('div',{className:'card-body'},React.createElement('div',{className:'verification-content'},React.createElement('div',{className:'alert alert-error',hidden:true}),React.createElement(api.UserVerification,{id:'jsn-user-verification-form',accounts:api.Edition.data?api.Edition.data.accounts:null,forgotUsername:api.Edition.params.forgotUsername,forgotPassword:api.Edition.params.forgotPassword}))),React.createElement('div',{className:'card-footer text-center'},React.createElement('button',{type:'button',className:'btn btn-primary',onClick:this.verifyUser},api.Text.parse('JSN_EXTFW_USER_VERIFICATION_VERIFY_BUTTON'))))));},refreshLicense:function(event){if(event){this.refs.refresh.disabled=true;this.refs.refresh.origHTML=this.refs.refresh.origHTML||this.refs.refresh.innerHTML;this.refs.refresh.innerHTML='<i class="fa fa-circle-o-notch fa-spin"></i>';api.Ajax.request(api.Edition.params.url+'&action=clear-license',function(){api.Edition.init({callback:function(){if(this.refs.refresh){this.refs.refresh.disabled=false;this.refs.refresh.innerHTML=this.refs.refresh.origHTML||this.refs.refresh.innerHTML;setTimeout(this.forceUpdate.bind(this),500);}}.bind(this)});}.bind(this));}else{api.Edition.init({callback:function(){setTimeout(this.forceUpdate.bind(this),500);}.bind(this)});}},unlinkAccount:function(){if(this.refs.unlink){this.refs.unlink.disabled=true;this.refs.unlink.origHTML=this.refs.unlink.origHTML||this.refs.unlink.innerHTML;this.refs.unlink.innerHTML='<i class="fa fa-circle-o-notch fa-spin"></i>';}api.Ajax.request(api.Edition.params.url+'&action=unlink',function(res){if(this.refs.unlink){this.refs.unlink.disabled=false;this.refs.unlink.innerHTML=this.refs.unlink.origHTML||this.refs.unlink.innerHTML;}if(!res||!res.responseJSON||!res.responseJSON.success){return api.Modal.alert(res.responseJSON?res.responseJSON.data:res.responseText);}if(api.Edition.data.accounts&&api.Edition.data.accounts.length){for(var i=0;i<api.Edition.data.accounts.length;i++){if(api.Edition.data.accounts[i].label==api.Edition.data.username){if(api.Edition.data.accounts[i].value==api.Edition.params.extension){api.Edition.data.accounts.splice(i,1);break;}}}}api.Edition.data.token='';api.Edition.data.username='';api.Edition.data.license=null;this.forceUpdate();api.Event.add('.jsn-settings .nav-tabs .nav-link','click',function(event){if(!api.Edition.data.license&&event.target.id!='user-account-tab'){api.Edition.init({callback:function(){setTimeout(this.forceUpdate.bind(this),500);}.bind(this)});}}.bind(this));}.bind(this));},tryPro:function(){api.Edition.introducePro();},verifyUser:function(event){api.Edition.doVerifyUser(this,event);}});var Footer=api.Footer=api.extendReactClass('MixinBase',{propTypes:{extension:React.PropTypes.string,version:React.PropTypes.string,frameworkVersion:React.PropTypes.string,updates:React.PropTypes.array,textMapping:React.PropTypes.object},getDefaultProps:function(){return{extension:'',version:'',frameworkVersion:'',updates:[],textMapping:{}};},render:function(){if(!api.Edition||!api.Edition.data){this.refreshLicense();return null;}var license=api.Edition.parseLicense();return React.createElement('div',{className:'jsn-footer text-center',style:{clear:'both'}},React.createElement('span',{className:'product-name'},api.Text.parse(this.props.extension.substr(4).toUpperCase())),license?[' ',React.createElement('span',{className:'product-edition'},license.edition)]:null,' ',React.createElement('span',{className:'product-version'},this.props.version),this.props.updates?this.props.updates.map(product=>{if(product.identified_name!='ext_framework2'){return[' ',React.createElement('a',{href:'#',className:'btn btn-warning update-jsn-product'},React.createElement('i',{className:'fa fa-refresh'}),' ',api.Text.parse(api.Text.parse('JSN_EXTFW_UPDATE_TO',true).replace('%s',product.version)))];}}):null,' ',api.Text.parse(api.Text.parse('JSN_EXTFW_POWERED_BY',true).replace('%s',this.props.frameworkVersion)),this.props.updates?this.props.updates.map(product=>{if(product.identified_name=='ext_framework2'){return[' ',React.createElement('a',{href:'#',className:'btn btn-warning update-jsn-product'},React.createElement('i',{className:'fa fa-refresh'}),' ',api.Text.parse(api.Text.parse('JSN_EXTFW_UPDATE_TO',true).replace('%s',product.version)))];}}):null);},refresh:function(){setTimeout(this.forceUpdate.bind(this),500);},refreshLicense:function(){api.Edition.init({callback:this.refresh});}});var Help=api.Help=api.extendReactClass('MixinBase',{propTypes:{items:React.PropTypes.array},getDefaultProps:function(){return{items:[]};},render:function(){return React.createElement("div",{className:"row jsn-pages jsn-page-help"},this.props.items.map(item=>{return React.createElement("div",{className:"col-6"},React.createElement("h5",null,api.Text.parse(item.title)),React.createElement("div",{className:"jsn-page-help-img d-flex align-items-center justify-content-center"},React.createElement("img",{width:"105",src:item.image,alt:item.image_alt||item.title})),React.createElement("p",null,api.Text.parse(item.description)),React.createElement("a",{href:item.link,target:"_blank",className:item.link_class||'btn btn-default'},api.Text.parse(item.link_text)));}));}});var Language=api.Language=api.extendReactClass('MixinBase',{propTypes:{save:React.PropTypes.string,files:React.PropTypes.object,fitHeight:React.PropTypes.string},getDefaultProps:function(){return{save:'',files:{},fitHeight:'.card'};},getInitialState:function(){return{filter:'',files:{}};},componentWillMount:function(){this.parent();for(var file in this.props.files){this.setState({editing:file});break;}},render:function(){if(!this.state.files[this.state.editing]){var lines=this.props.files[this.state.editing].split("\n");var mapping={};for(var i=0;i<lines.length;i++){lines[i]=lines[i].trim();if(lines[i]!=''&&lines[i][0]!=';'&&lines[i][0]!='#'){var tmp=lines[i].trim().split(/\s*=\s*/);mapping[tmp[0].trim()]=tmp[1].trim().substr(1,tmp[1].length-2);}}this.state.files[this.state.editing]=mapping;}return React.createElement('div',{ref:'mountedDOMNode'},React.createElement('div',{className:'card'},React.createElement('div',{className:'card-body'},React.createElement('div',{id:'files-panel',ref:'files'},React.createElement('ul',null,function(){var items=[];for(var file in this.props.files){items.push(React.createElement('li',null,React.createElement('a',{href:'javascript:void(0)',className:file==this.state.editing?'active':'',onClick:function(f,event){event.preventDefault();this.setState({editing:f});}.bind(this,file)},file)));}return items;}.bind(this)())),React.createElement('div',{id:'edit-panel',ref:'edit'},React.createElement('div',{className:'filter-form'},React.createElement('div',{className:'form-group'},React.createElement('input',{ref:'filter',name:'filter',value:this.state.filter,className:'form-control',placeholder:api.Text.parse('JSN_EXTFW_SEARCH_FOR'),onChange:function(event){this.setState({filter:event.target.value});}.bind(this)}))),React.createElement('div',{className:'edit-form'},function(){var items=[];var filter=this.state.filter.toLowerCase();for(var k in this.state.files[this.state.editing]){var text=this.state.files[this.state.editing][k].toLowerCase();items.push(React.createElement('div',{className:'form-group '+(text.indexOf(filter)>-1?'':'hidden')},React.createElement('input',{name:k,value:this.state.files[this.state.editing][k],className:'form-control',onChange:function(event){var files=this.state.files;files[this.state.editing][event.target.name]=event.target.value;this.setState({files:files});}.bind(this)})));}return items;}.bind(this)())))));},save:function(cb){var inputs=this.refs.mountedDOMNode.querySelectorAll('input');for(var i=0;i<inputs.length;i++){inputs[i].disabled=true;}api.Ajax.request(this.props.save,function(res){for(var i=0;i<inputs.length;i++){inputs[i].disabled=false;}if(!res.responseJSON||!res.responseJSON.success){api.Modal.alert(res.responseJSON?res.responseJSON.data:res.responseText);}if(typeof cb=='function'){cb(res);}}.bind(this),{files:this.state.files});}});var Privacy=api.Privacy=api.extendReactClass('MixinBase',{propTypes:{textMapping:React.PropTypes.object},getDefaultProps:function(){return{textMapping:null};},getInitialState:function(){return{enabled:api.Tracking.config.enabled||this.props.enabled||false,changed:false,saving:false};},render:function(){return React.createElement('div',{ref:'mountedDOMNode'},React.createElement('p',null,api.Text.parse('JSN_EXTFW_CONFIGURATION_PRIVACY_INTRO')),React.createElement('div',{className:'form-check form-check-inline'},React.createElement('label',{className:'form-check-label'},React.createElement('input',{ref:'toggle',type:'checkbox',value:'1',checked:this.state.enabled,className:'form-check-input',onChange:function(){var enabled=!this.state.enabled;this.setState({enabled:enabled,changed:(api.Tracking.config.enabled||this.props.enabled||false)!=enabled});}.bind(this)}),api.Text.parse('JSN_EXTFW_TRACKING_CONFIRMATION_AGREE_BUTTON'))),React.createElement('div',{className:'text-center'},React.createElement('button',{ref:'btn',type:'button',disabled:!this.state.changed||this.state.saving,className:'btn btn-default',onClick:this.saveSettings},this.state.saving?React.createElement('i',{className:'fa fa-circle-o-notch fa-spin'}):api.Text.parse('JSN_EXTFW_SAVE_SETTINGS'))));},componentDidMount:function(){api.Event.add(api.Tracking,'TrackingConfigChanged',function(){this.setState({enabled:api.Tracking.config.enabled?true:false});}.bind(this));},saveSettings:function(){this.setState({saving:true});var link=api.Edition.getLink('update&context=settings');api.Ajax.request(link,function(res){api.Tracking.initGA({enabled:this.state.enabled});this.setState({changed:false,saving:false});}.bind(this),{allow_tracking:this.state.enabled?1:0});}});var Update=api.Update=api.extendReactClass('MixinBase',{propTypes:{trigger:React.PropTypes.string,extension:React.PropTypes.string,updates:React.PropTypes.array,textMapping:React.PropTypes.object},getDefaultProps:function(){return{trigger:'',extension:'',updates:[],textMapping:{}};},getInitialState:function(){return{action:null,current:0,success:[],failure:{}};},render:function(){if(this.state.action&&typeof this[this.state.action]=='function'){this[this.state.action]();}return null;},componentDidMount:function(){this.parent();if(this.props.trigger){api.Event.add(document,'click',this.start);}},start:function(event){var target=event.target;while(target&&target.nodeName!='BODY'){if(target.parentNode){var elms=target.parentNode.querySelectorAll(this.props.trigger);if(elms&&elms.length&&Array.prototype.indexOf.call(elms,target)>-1){break;}}target=target.parentNode;}if(!target||target.nodeName=='BODY'){return;}event.preventDefault();event.stopPropagation();this.setState({action:'confirm'});},confirm:function(){this.modal=api.Modal.get({id:'jsn-product-update-modal',type:'html',width:'720px',title:api.Text.parse('JSN_EXTFW_UPDATE_MODAL_TITLE'),content:React.createElement('div',{className:'jsn-product-update-confirm'},React.createElement('p',null,api.Text.parse(api.Text.parse('JSN_EXTFW_UPDATE_MODAL_CONFIRM_MESSAGE',true).replace('%s',api.Text.parse(this.props.extension.substr(4).toUpperCase())))),React.createElement('div',{className:'alert alert-warning'},React.createElement('span',{className:'label label-danger'},api.Text.parse('JSN_EXTFW_UPDATE_MODAL_CONFIRM_IMPORTANT_INFO')),React.createElement('ul',null,React.createElement('li',{className:'mb-0'},api.Text.parse(api.Text.parse('JSN_EXTFW_UPDATE_MODAL_CONFIRM_IMPORTANT_NOTE',true).replace('%s',api.Text.parse(this.props.extension.substr(4).toUpperCase())))),this.props.updates.map(product=>{var text;if(product.identified_name=='ext_framework2'){text='JSN_EXTFW_UPDATE_MODAL_CONFIRM_IMPORTANT_FRAMEWORK';}else{if(this.props.updates.length==1){text=api.Text.parse('JSN_EXTFW_UPDATE_MODAL_CONFIRM_IMPORTANT_EXTENSION_ONLY',true);}else{text=api.Text.parse('JSN_EXTFW_UPDATE_MODAL_CONFIRM_IMPORTANT_EXTENSION',true);}text=text.replace('%1$s',api.Text.parse(this.props.extension.substr(4).toUpperCase())).replace('%2$s',this.props.extension.substr(4).toLowerCase().replace(/\d+$/,''));}return React.createElement('li',{className:'mb-0'},api.Text.parse(text));})))),buttons:[{text:api.Text.parse('JSN_EXTFW_UPDATE_INSTALL_BUTTON_TEXT'),className:'btn btn-primary',onClick:function(){this.setState({action:'install'});}.bind(this)},{text:api.Text.parse('JSN_EXTFW_UPDATE_CANCEL_BUTTON_TEXT'),className:'btn btn-default',onClick:api.Modal.hide}]});},install:function(){var current=this.state.current;this.modal.setState({content:React.createElement('div',{className:'jsn-product-update-install'},React.createElement('p',null,api.Text.parse('JSN_EXTFW_UPDATE_MODAL_INSTALL_MESSAGE')),React.createElement('ul',null,this.props.updates.map((update,index)=>{if(index<=current){return React.createElement('li',{ref:'extension_'+index},React.createElement('span',{className:'title'},api.Text.parse(api.Text.parse('JSN_EXTFW_UPDATE_DOWNLOAD_AND_INSTALL_EXTENSION',true).replace('%s',api.Text.parse(update.name)))),React.createElement('span',{className:this.getIcon(update.identified_name)}),React.createElement('div',{className:'progress hidden'},React.createElement('div',{className:'progress-bar',role:'progressbar',style:{width:'0%'}},React.createElement('span',{className:'percentage'},'0%'))),React.createElement('div',{className:'alert alert-danger'+(this.getError(update.identified_name)?'':' hidden')},this.getError(update.identified_name)));}}))),buttons:this.props.updates[current]!==undefined?'disabled':[{text:api.Text.parse('JSN_EXTFW_CLOSE'),className:'btn btn-primary',onClick:function(modal,event){event.target.disabled=true;event.target.innerHTML='<i class="fa fa-circle-o-notch fa-spin"></i>';window.location.reload();}}]});if(this.props.updates[current]!==undefined){setTimeout(function(){var downloadUrl=api.urls.ajaxBase+'&context=update&action=download';var progressBar=this.refs['extension_'+current].querySelector('.progress');var progressBarInner=progressBar.querySelector('[role="progressbar"]');var progressBarText=progressBar.querySelector('.percentage');downloadUrl+='&component='+this.props.extension;downloadUrl+='&id='+this.props.updates[current].identified_name;api.Ajax.downloadFile(downloadUrl,progressBar,function(res){if(!res||!res.responseJSON||!res.responseJSON.success){var failure=this.state.failure;var message=res&&res.responseJSON?res.responseJSON.data:res.responseText;failure[this.props.updates[current].identified_name]=message;this.setState({failure:failure,current:current+1});}else{api.Ajax.request(downloadUrl.replace('&action=download','&action=install'),function(res){progressBarInner.style.width='100%';progressBarText.textContent='100%';setTimeout(function(){progressBar.classList.add('hidden');progressBarInner.className=progressBarInner.className.replace(' progress-bar-striped active','');if(res.responseText.trim().match(/^<script[^>]*>(.|[\r\n])+<\/script>$/)){res.responseJSON=res.responseJSON||{};res.responseJSON.success=true;}if(!res||!res.responseJSON||!res.responseJSON.success){var failure=this.state.failure;var message=res&&res.responseJSON?res.responseJSON.data:res.responseText;failure[this.props.updates[current].identified_name]=message;this.setState({failure:failure,current:current+1});}else{var success=this.state.success;success.push(this.props.updates[current].identified_name);this.setState({success:success,current:current+1});}}.bind(this),500);}.bind(this));}}.bind(this),96);}.bind(this),10);}},getIcon:function(id){if(this.state.success.indexOf(id)>-1){return 'fa fa-check-circle-o text-success';}else if(this.state.failure[id]!==undefined){return 'fa fa-times-circle-o text-danger';}else{return 'hidden';}},getError:function(id){return this.state.failure[id]!==undefined?this.state.failure[id]:false;},componentWillUnmount:function(){this.parent();if(this.props.trigger){api.Event.remove(document,'click',this.start);}}});})((JSN=window.JSN||{}));